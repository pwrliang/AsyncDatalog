#!/usr/bin/env bash
PROG="java -Dsocialite.output.dir=gen -Dsocialite.worker.num=64 -Dsocialite.port=50100 -Dsocialite.master=master -Dlog4j.configuration=file:/home/gengl/socialite-before-yarn/conf/log4j.properties -classpath /home/gengl/socialite-before-yarn/out/production/socialite:/home/gengl/socialite-before-yarn/ext/jython.jar:/home/gengl/socialite-before-yarn/ext/ST-4.0.7.jar:/home/gengl/socialite-before-yarn/ext/guava-18.0.jar:/home/gengl/socialite-before-yarn/ext/trove-3.0.3.jar:/home/gengl/socialite-before-yarn/ext/log4j-1.2.16.jar:/home/gengl/socialite-before-yarn/ext/antlrworks-1.5.jar:/home/gengl/socialite-before-yarn/ext/annotations-5.1.jar:/home/gengl/socialite-before-yarn/ext/antlrworks-1.4.3.jar:/home/gengl/socialite-before-yarn/ext/commons-lang-2.6.jar:/home/gengl/socialite-before-yarn/ext/commons-lang3-3.1.jar:/home/gengl/socialite-before-yarn/ext/RoaringBitmap-0.5.18.jar:/home/gengl/socialite-before-yarn/ext/commons-logging-1.1.1.jar:/home/gengl/socialite-before-yarn/ext/commons-collections-3.2.1.jar:/home/gengl/socialite-before-yarn/ext/commons-configuration-1.6.jar:/home/gengl/socialite-before-yarn/ext/commons-logging-api-1.0.4.jar:/home/gengl/socialite-before-yarn/ext/concurrent-prim-map-1.0.0.jar:/home/gengl/socialite-before-yarn/ext/antlr-3.5.2-complete-no-st3.jar:/home/gengl/socialite-before-yarn/ext/hadoop/commons-io-2.4.jar:/home/gengl/socialite-before-yarn/ext/hadoop/zookeeper-3.4.6.jar:/home/gengl/socialite-before-yarn/ext/hadoop/hadoop-auth-2.7.2.jar:/home/gengl/socialite-before-yarn/ext/hadoop/hadoop-hdfs-2.7.2.jar:/home/gengl/socialite-before-yarn/ext/hadoop/hadoop-common-2.7.2.jar:/home/gengl/socialite-before-yarn/ext/hadoop/curator-client-2.10.0.jar:/home/gengl/socialite-before-yarn/ext/hadoop/curator-recipes-2.10.0.jar:/home/gengl/socialite-before-yarn/ext/hadoop/jackson-core-asl-1.9.13.jar:/home/gengl/socialite-before-yarn/ext/hadoop/curator-framework-2.10.0.jar:/home/gengl/socialite-before-yarn/ext/hadoop/jackson-mapper-asl-1.9.13.jar:/home/gengl/socialite-before-yarn/ext/hadoop/htrace-core-3.2.0-incubating.jar:/home/gengl/socialite-before-yarn/ext/mpi/mpi.jar:/home/gengl/socialite-before-yarn/ext/mpi/mpj.jar:/home/gengl/socialite-before-yarn/ext/mpi/xdev.jar:/home/gengl/socialite-before-yarn/ext/mpi/mxdev.jar:/home/gengl/socialite-before-yarn/ext/mpi/tools.jar:/home/gengl/socialite-before-yarn/ext/mpi/daemon.jar:/home/gengl/socialite-before-yarn/ext/mpi/hybdev.jar:/home/gengl/socialite-before-yarn/ext/mpi/mpiExp.jar:/home/gengl/socialite-before-yarn/ext/mpi/mpjbuf.jar:/home/gengl/socialite-before-yarn/ext/mpi/mpjdev.jar:/home/gengl/socialite-before-yarn/ext/mpi/niodev.jar:/home/gengl/socialite-before-yarn/ext/mpi/smpdev.jar:/home/gengl/socialite-before-yarn/ext/mpi/loader1.jar:/home/gengl/socialite-before-yarn/ext/mpi/loader2.jar:/home/gengl/socialite-before-yarn/ext/mpi/starter.jar:/home/gengl/socialite-before-yarn/ext/mpi/log4j-1.2.11.jar:/home/gengl/socialite-before-yarn/ext/mpi/daemonmanager.jar:/home/gengl/socialite-before-yarn/ext/mpi/javax.servlet.jar:/home/gengl/socialite-before-yarn/ext/mpi/runtimecommon.jar:/home/gengl/socialite-before-yarn/ext/mpi/commons-io-2.4.jar:/home/gengl/socialite-before-yarn/ext/mpi/mpj-app-master.jar:/home/gengl/socialite-before-yarn/ext/mpi/commons-cli-1.2.jar:/home/gengl/socialite-before-yarn/ext/mpi/mpj-yarn-client.jar:/home/gengl/socialite-before-yarn/ext/mpi/mpj-yarn-wrapper.jar:/home/gengl/socialite-before-yarn/ext/mpi/commons-codec-1.8.jar:/home/gengl/socialite-before-yarn/ext/serialize/minlog-1.3.0.jar:/home/gengl/socialite-before-yarn/ext/serialize/libthrift-0.9.3.jar:/home/gengl/socialite-before-yarn/ext/serialize/objenesis-2.5.1.jar:/home/gengl/socialite-before-yarn/ext/serialize/slf4j-api-1.7.13.jar:/home/gengl/socialite-before-yarn/ext/serialize/kryo-shaded-4.0.1.jar:/home/gengl/socialite-before-yarn/ext/serialize/protobuf-java-2.5.0.jar:/home/gengl/socialite-before-yarn/ext/serialize/slf4j-log4j12-1.7.13.jar:/home/gengl/socialite-before-yarn/jython/jython.jar socialite.test.CC"

for i in `seq 1 4`;
do
	./start-nodes.sh machines
	sleep 5
	$PROG
	sleep 2
	./kill-all.sh machines
	sleep 5
done

